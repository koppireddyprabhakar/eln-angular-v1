<main id="main" class="main body-height">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <ul class="nav nav-tabs outer-tab-border pt-4" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" [ngClass]="{ active: activeTab === 'summary' }" id="summary-tab"
                            data-bs-toggle="tab" data-bs-target="#summary" (click)="search('summary', -1)" type="button"
                            role="tab" aria-controls="summary" aria-selected="false">
                            Summary
                        </button>
                    </li>
                    <li class="nav-item" role="presentation" *ngFor="let dumm of dummyTabs; index as i">
                        <button *ngIf="!dumm.isEdit" class="nav-link" id="{{ dumm.value }}-tab"
                            [disabled]="!isCreatedExperiment" data-bs-toggle="tab"
                            [attr.data-bs-target]="'#' + dumm.value" type="button" role="tab"
                            [ngClass]="{ active: activeTab === dumm.value }" [attr.aria-controls]="dumm.value"
                            aria-selected="true" (click)="search(dumm.value, i)">
                            {{ dumm.label }}
                            <i class="bi bi-pencil-square" *ngIf="isCreatedExperiment"></i>
                            <!-- <span >Edit</span> -->
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="contact-tab" [disabled]="!isCreatedExperiment" data-bs-toggle="tab"
                            data-bs-target="#contact" (click)="search('excipients', -1)"
                            [ngClass]="{ active: activeTab === 'contact' }" type="button" role="tab"
                            aria-controls="contact" aria-selected="false">
                            Excipients/Chemicals
                        </button>
                    </li>
                    <li *ngIf="experimentDetails && checkStatus(experimentDetails.experimentStatus.toUpperCase())"
                        class="nav-item" role="presentation">
                        <button class="nav-link" id="results-tab" [disabled]="!isCreatedExperiment" data-bs-toggle="tab"
                            data-bs-target="#results" (click)="search('results', -1)"
                            [ngClass]="{ active: activeTab === 'results' }" type="button" role="tab"
                            aria-controls="results" aria-selected="false">
                            Results
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="attachments-tab" [disabled]="!isCreatedExperiment"
                            data-bs-toggle="tab" data-bs-target="#attachments" (click)="search('attachments', -1)"
                            [ngClass]="{ active: activeTab === 'attachments' }" type="button" role="tab"
                            aria-controls="attachments" aria-selected="false">
                            Attachments
                        </button>
                    </li>
                </ul>
                <div class="tab-content pt-2" id="myTabContent">
                    <div class="tab-pane fade show" [ngClass]="{
                active: activeTab === 'summary',
                show: activeTab === 'summary'
              }" id="summary" role="tabpanel" aria-labelledby="summary-tab">
                        <div>
                            <!-- <h4 class="pt-2">Details of the experiment</h4> -->
                            <div class="row pt-3">
                                <div class="col-lg-12">
                                    <div class="card">
                                        <div class="card-body" *ngIf="project">
                                            <h5 class="card-title">Details of the experiment</h5>
                                            <form class="row g-3" [formGroup]="summaryForm">
                                                <div class="row mb-3 pt-2">
                                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Project
                                                        Name</label>
                                                    <div class="col-sm-9 pt-1">
                                                        {{ project.projectName }}
                                                    </div>
                                                </div>
                                                <div class="row mb-3 pt-2">
                                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Product
                                                        Name</label>
                                                    <div class="col-sm-9 pt-1">
                                                        {{ project.productName }}
                                                    </div>
                                                </div>
                                                <div class="row mb-3 pt-2">
                                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Product
                                                        Code</label>
                                                    <div class="col-sm-9 pt-1">
                                                        {{ project.productCode }}
                                                    </div>
                                                </div>
                                                <div class="row mb-3 pt-2">
                                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Dosage
                                                        Name</label>
                                                    <div class="col-sm-9 pt-1">
                                                        {{ project.dosageName }}
                                                    </div>
                                                </div>
                                                <!-- <input class="form-control" type="text"  /> -->
                                                <div class="row mb-3">
                                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Formulation
                                                        Type</label>
                                                    <div class="col-sm-9 pt-1">
                                                        {{ project.formulationName }}
                                                    </div>
                                                </div>
                                                <div class="row mb-3">
                                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Batch
                                                        Number</label>
                                                    <div class="col-sm-9 pt-1">{{ batchNumber }}</div>
                                                </div>
                                                <div class="row mb-3">
                                                    <label for="experimentName"
                                                        class="col-sm-3 col-form-label">Experiment Name</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="experimentName"
                                                            formControlName="experimentName"
                                                            [readonly]="experimentId" />
                                                    </div>
                                                </div>

                                                <div class="row mb-3">
                                                    <label for="batchSize" class="col-sm-3 col-form-label">Batch
                                                        Size</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="batchSize"
                                                            formControlName="batchSize" [readonly]="experimentId" />
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <section > -->
                    <div *ngFor="let dumm of dummyTabs; index as i" class="tab-pane fade" [ngClass]="{
                active: activeTab === dumm.value,
                show: activeTab === dumm.value
              }" id="{{ dumm.value }}" role="tabpanel" [attr.aria-labelledby]="dumm + '-tab'">
                        <ckeditor required [(ngModel)]="article[i].text" data="" name="text"></ckeditor>
                    </div>

                    <!-- </section> -->
                    <div class="tab-pane fade" [ngClass]="{
                active: activeTab === 'contact',
                show: activeTab === 'contact'
              }" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                        <table id="first-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                            class="row-border hover">
                            <thead>
                                <tr>
                                    <th>Inward Name</th>
                                    <th>Material Name</th>
                                    <th>Material Type</th>
                                    <th>Batch Number</th>
                                    <th>Source Name</th>
                                    <th>Potency</th>
                                    <th>Grade</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let user of tableData">
                                    <td>{{ user.excipientsName }}</td>
                                    <td>{{ user.materialName }}</td>
                                    <td>{{ user.materialType }}</td>
                                    <td>{{ user.batchNo }}</td>
                                    <td>{{ user.sourceName }}</td>
                                    <td>{{ user.potency }}</td>
                                    <td>{{ user.grade }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div *ngIf="experimentDetails && checkStatus(experimentDetails.experimentStatus.toUpperCase())"
                        class="tab-pane fade" [ngClass]="{
                        active: activeTab === 'results',
                        show: activeTab === 'results'
                      }" id="results" role="tabpanel" aria-labelledby="results-tab">

                        <h3>RESULTS</h3>

                        <table id="second-table" datatable [dtOptions]="dtResultOptions" [dtTrigger]="dtResultTrigger"
                            class="row-border hover pt-4">
                            <thead>
                                <tr>
                                    <th>Test Id</th>
                                    <th>Test Name</th>
                                    <th>Results</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let test of tests" class="py-2">
                                    <td>{{ test.testNumber }}</td>
                                    <td>{{ test.testName }}</td>
                                    <td>{{ test.testResult }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane fade" [ngClass]="{
                active: activeTab === 'attachments',
                show: activeTab === 'attachments'
              }" id="attachments" role="tabpanel" aria-labelledby="attachments-tab">
                        <div class="row mb-3">
                            <label *ngIf="files.length > 0">Uploaded Attachements</label>
                            <span *ngFor="let file of files">
                                <div class="file-container">
                                    <span class="file-list" (click)="getFileContent(file.name, file.experimentId)">{{
                                        file.name |
                                        titlecase }}</span>
                                </div>
                            </span>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</main>